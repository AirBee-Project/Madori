2.3. 空間ボクセル
2.3.1. 空間ボクセルの概念
空、地上、地下、屋内、海を含む地球上のあらゆる空間を直方格子状に分割した際の
個々の直方体の空間領域を「空間ボクセル」とする。各空間ボクセルには、一意に位置
を特定できる「空間 ID」を付与する。
空間ボクセルは以下のような構造を持つ。
・ 最上位の階層をズームレベル 0 とし、ズームレベルが 1 つ増えるごとに空間ボクセル
の 8 分割を繰り返す階層構造を持つ。
・ ズームレベル間で親子関係を持つ。
・ 同一ズームレベルにおいて重複する空間ボクセルは存在しない。
2.3.2. 空間ボクセルによる空間分割方式の基本要素
空間ボクセルによる空間の分割方式を定義するための基本要素として、以下の 3 つの要
素があり、次節以降で各要素の詳細について叙述する。
（１）空間ボクセルの高さの基準
（２）水平方向の空間分割方式
（３）鉛直方向の空間分割方式
空間分割方式の採用にあたっては、一般的に流通している地理空間情報及び関連するサ
ービスとの親和性、ボクセルの形状・サイズの利便性、グローバルでの利用可能性等の点
を考慮している。
（１）空間ボクセルの高さの基準
① 空間ボクセルを配置する基準面
地球上の3次元空間に空間ボクセルを配置する基準となる面はジオイド（地球の重力に
よる位置エネルギーの等しい面）とし、標高 0m の面を平らな面とした座標空間上に空間
ボクセルを配置する。
空間ボクセルの高さの値は標高値に相当し、標高を基準に整備された空間属性情報を
そのまま空間ボクセルに紐付けできる。
2 国土地理院 https://www.gsi.go.jp/buturisokuchi/grageo_geoid.html
3 一部の離島においては基準面補正量を導入
https://www.gsi.go.jp/sokuchikijun/hyoko2024rev.html#shikumi2
② ジオイドモデル
衛星測位から高さを求めるためのデータとして「ジオイドモデル」がある。ジオイド
モデルは国や地域によって使い分けられているため、高さの基準をメタデータとして明
示するようにする。日本においては、東京湾平均海面に一致する等ポテンシャル面がジ
オイドと定められており、標準的な高さの基準面である。
（２）水平方向の空間分割方式
① 水平方向の分割
水平方向の分割については、Web メルカトル図法4で定義されている地図範囲を全体範
囲として行う。
対象とする地球上の領域は以下の範囲である。
経度（X）：西経 180 度～東経 180 度
緯度（Y）：南緯 85.0511 度～北緯 85.0511 度
上記範囲の領域をズームレベル 0 とし、ズームレベルが 1 つ増えるごとに 4 分割（南北
方向に 2 分割、東西方向に 2 分割）を繰り返す。この分割方式は、多くの Web 地図サービ
スで採用されている XYZ タイル（Slippy map tilenames 5）と同様である。
② 測地系
水平方向の分割のベースとなる地図の測地系は、世界測地系（日本測地系 2024
（JGD2024）または WGS84）とする。必要に応じて、適用範囲に採用した測地系を空間 ID
に紐付けたデータのメタデータとして明示できるようにする。
③ x インデックス、y インデックスの割り当て
分割された各図郭の識別番号として、経度（東西方向）の「x インデックス」と緯度
（南北方向）の「y インデックス」を割り当てる。
北西端の端点が西経 180 度、北緯 85.0511 度である図郭における x と y のインデックス
を（0,0）として、x インデックスは東方向、y インデックスは南方向にかけて１つずつ値
を増分する。
x インデックスの値
西端の図郭：x = 0、東端の図郭：x = 2 ^ ズームレベル – 1
 （西端の図郭の 0 から東方向の図郭にかけて 1 つずつ値を増分する）
4
Web メルカトル図法については、その地図範囲の定義を採用しているものであり、空間
ID 対応システムで利用する地図の投影法は任意である。空間 ID の算出には、世界測地系
（日本測地系 2024（JGD2024）または WGS84）の準拠楕円体上での緯度経度（10 進法表
記）を使用する。
5 Slippy map tilenames - OpenStreetMap Wiki
https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames
y インデックスの値
北端の図郭：y = 0、南端の図郭：y = 2 ^ ズームレベル – 1
 （北端の図郭の 0 から南方向の図郭にかけて 1 つずつ値を増分する）
 （３）鉛直方向の空間分割方式
① 鉛直方向の分割
鉛直方向の分割については、高さのプラス方向及びマイナス方向の範囲をもとに行う。
各範囲は以下のとおりである。
プラス方向の範囲（標高値）：0m ～ 33,554,432m
マイナス方向の範囲（標高値）：- 33,554,432m ～ 0m
上記のプラス方向の範囲及びマイナス方向の範囲をズームレベル0とし、ズームレベル
が 1 つ増えるごとに 2 等分割を繰り返す。
② f インデックスの割り当て
鉛直方向に分割された各範囲の識別番号として、「f インデックス」が割り当てられる。
ズームレベルが 1 つ増えるごとに、プラス方向は、0 からプラス方向に 1 つずつ増分した
値を割り当てる。マイナス方向は、-1からマイナス方向に、1つずつ減分した値を割り当
てる。
2.3.2.1. 空間ボクセルのズームレベルとサイズ
空間ボクセルは、ズームレベル 0 からズームレベルが 1 つ増えるごとに 8 分割を繰り返
し、サイズが小さくなっていく。ズームレベル 0～26 における空間ボクセルの水平方向
（東西方向・南北方向）、鉛直方向のサイズ例は以下のとおりである。なお、ズームレ
ベル 27 以上も定義することはできる。
上表の東西方向・南北方向の距離は緯度0度における距離を示しており、高緯度にな
るにしたがって東西方向・南北方向ともに距離が短くなる。
なお、鉛直方向の距離はいずれの経度・緯度においても一律で表2-1のとおりである。
参考例として、日本の各都市（那覇市、東京都、札幌市）のズームレベル 16～26 にお
ける空間ボクセルのサイズを以下に示す
2.4. 空間 ID
2.4.1. 空間 ID の形式
空間 ID の構成要素には、z, f, x, y があり、各要素をスラッシュ（/）で連結した配
列とする。
空間 ID の構成要素
{z} : ズームレベル
{f} : 標高（鉛直方向）インデックス
{x} : 経度（東西方向）インデックス
{y} : 緯度（南北方向）インデックス
空間 ID の配列
{z}/{f}/{x}/{y}
例：20/1/931369/413142
2.4.2. 空間 ID の各インデックスの算出方法
経度、緯度、標高、ズームレベルから空間 ID の各インデックス（f, x, y）を算出する
ための計算式は、以下のとおりである6。
--------------------------------------------------------------------------------
𝑙𝑛𝑔: 経度 [10 進度]
𝑙𝑎𝑡_𝑟𝑎𝑑: 緯度 [ラジアン]
ℎ: 標高 [𝑚]
𝑧: ズームレベル
𝑛 = 2
𝑧
𝑍 = 25 (ボクセルの高さが 1m となるズームレベル)
𝐻 = 2
𝑍 [𝑚]
𝑓 = 𝑓𝑙𝑜𝑜𝑟 (𝑛 ∗
ℎ
𝐻
)
6 国連ベクトルタイルツールキット https://github.com/unvt/zfxy-spec
𝑥 = 𝑓𝑙𝑜𝑜𝑟 (𝑛 ∗ (
𝑙𝑛𝑔 + 180
360 ))
𝑦 = 𝑓𝑙𝑜𝑜𝑟
(

 𝑛
2
∗
(


1 −
log (tan(𝑙𝑎𝑡_𝑟𝑎𝑑) + (
1
cos(𝑙𝑎𝑡_𝑟𝑎𝑑)
))
𝜋
)


)


--------------------------------------------------------------------------------
2.4.3. 高さ情報を持たないデータに対応した空間 ID の形式
空間属性情報には、高さ情報を持たない 2 次元データ（例：人口統計、用途地域、土地
利用）が数多くある。これらのデータを空間 ID に紐付ける場合、標高を示す f インデック
スは不要であることから、f インデックスを除いた以下の ID 形式を適用することとする。
高さ情報を持たないデータに対応した空間 ID の配列
{z}/{x}/{y}
例：20/931369/413142
これは地理院地図などの Web 地図サービスの XYZ タイル番号と同じ配列である。
2.5.2. 時空間 ID
空間 ID が持つ空間情報を検索・統合する検索キーとしての役割を、時間に応じて変化/
移動する情報にも適用できるように時空間 ID を定義する。時間軸を一定間隔で区切った時
間間隔ごとの時空間 ID に、移動体や事象の情報を紐付けて統合することにより、特定の時
空間における概況（移動体数、人流、気象状況など）の把握が可能となる。これにより混
雑度やリスク度の高い時空間の特定などに役立てることができる。
（１）時空間 ID の構成
時空間 ID は空間 ID と時間 ID から構成され、時間 ID はオプションで追加できるものと
する。
２）時間軸の分割方式
時間軸の起点 [1970 年 1 月 1 日 0:00] から一定の時間間隔 [任意指定 (単位：秒)] で
時間軸を分割し、その時間間隔ごとに一意の識別子を付与することとする。時間軸の分割
における定義項目とその内容は以下のとおりである。
時間軸の起点：1970/1/1 0:00（協定世界時(UTC)）
時間の単位：秒
時間軸の起点は UNIX 時間の起点である 1970/1/1 0:00（協定世界時(UTC)）を採用して
おり、起点からの経過秒数は UNIX 時間に相当する。UNIX 時間は国や地域による時差やサ
マータイムの影響を受けないため、グローバルで統一した時間 ID を定義できる。UNIX 時
間は協定世界時（UTC）であることから、時間 ID の算出に使用する時間は協定世界時
(UTC) に統一する。
時間間隔は任意の秒数を指定できることとする。複数レベルを定義することが可能であ
り、空間 ID のズームレベルとは独立している。
（３）時間インデックスの算出方法
UNIX 時間と時間間隔 (秒) から各時間間隔の識別子である時間インデックスを算出する
ための計算式を以下に示す。
𝑡 ∶ 時間インデックス (各時間間隔の識別子)
𝑢 ∶ UNIX 時間 (1970 年 1 月 1 日 0: 00 からの経過秒)
𝑖 ∶ 時間間隔 (秒)
𝑡 = 𝑓𝑙𝑜𝑜𝑟(𝑢 / 𝑖)
（４）時空間 ID の形式
空間 ID（{z}/{f}/{x}/{y}）に時間 ID（時間間隔と時間インデックスから構成）を付加
したものを時空間 ID とする。
空間 ID と時間 ID を連結する文字は、アンダースコア（ _ ）とする（空間 ID では各イ
ンデックスの連結文字としてスラッシュ（/）を使用しているが、高さ情報を持たないデ
ータに対応した空間 ID({z}/{x}/{y})を利用した際との混同を避けるため、代表的な連結
文字のひとつであるアンダースコアを採用）。
時間 ID の構成要素
{i} : 時間間隔（秒）
{t} : 時間インデックス
時空間 ID の配列
{z}/{f}/{x}/{y}_{i}/{t}
例：12/0/3638/1614_1800/809712
（５）異なる時間間隔定義の時間 ID 間の関係性把握
時間 ID の要素から計算をして秒単位の時間範囲を求めることで、異なる時間間隔定義の
時間 ID 間の関係性（重複・包含関係など）を把握することが可能となる
時間 ID の時間範囲の始点（秒）の計算式
i * t [時間間隔 * 時間インデックス]
時間 ID の時間範囲の終点（秒）の計算式
(i * t) + t [(時間間隔 * 時間インデックス) + 時間間隔]
3. 空間 ID の拡張記法
拡張記法の導入により、トラフィック量や計算量の削減が見込める。拡張記法はIPAの公式記法に変換可能であり、互換性に配慮されている。

Single記法
インデックスを{数値}で表現する。通常の記法である。

例
4/5/3/2,4/5/3/3,4/5/3/4,4/5/3/5
LimitRange記法
インデックスの範囲を{数値}:{数値}で表す。

例
4/5/3/2:5

Singleに変換
4/5:6/3/2:5

Singleに変換
4/5/3/2:5_3600/30:33

Singleに変換
AfterUnlimitRange記法
インデックスのある値から終端値までを{数値}:-で表す。ただし、Tにおいては終端値がないため、永続的な範囲を表す。

例
4/5/3/2:-

Singleに変換
4/10:-/3/2:-

Singleに変換
4/5/3/2_3600/30:-

Singleに変換
BeforeUnlimitRange記法
インデックスの始端値からあるIndexまでを-:{数値}で表す。

例
4/5/3/-:5
Singleに変換
4/5/3/0,4/5/3/1,4/5/3/2,4/5/3/3,4/5/3/4,4/5/3/5

4/5/-:3/-:5

Singleに変換
4/5/0/0, 4/5/0/1, 4/5/0/2, 4/5/0/3, 4/5/0/4, 4/5/0/5,
4/5/1/0, 4/5/1/1, 4/5/1/2, 4/5/1/3, 4/5/1/4, 4/5/1/5,
4/5/2/0, 4/5/2/1, 4/5/2/2, 4/5/2/3, 4/5/2/4, 4/5/2/5,
4/5/3/0, 4/5/3/1, 4/5/3/2, 4/5/3/3, 4/5/3/4, 4/5/3/5

4/5/2/4_3600/-:10

Singleに変換
4/5/2/4_3600/0, 4/5/2/4_3600/1, 4/5/2/4_3600/2, 4/5/2/4_3600/3, 4/5/2/4_3600/4, 4/5/2/4_3600/5, 4/5/2/4_3600/6, 4/5/2/4_3600/7, 4/5/2/4_3600/8, 4/5/2/4_3600/9, 4/5/2/4_3600/10

Any記法
インデックスの始端値から終端値までを-で表す。ただし、Tにおいては終端値がないため、永続的な範囲を表す。

例
4/5/3/-
Singleに変換
4/5/3/0, 4/5/3/1, 4/5/3/2, 4/5/3/3, 4/5/3/4, 4/5/3/5, 4/5/3/6, 4/5/3/7, 4/5/3/8, 4/5/3/9, 4/5/3/10, 4/5/3/11, 4/5/3/12, 4/5/3/13, 4/5/3/14, 4/5/3/15

4/5/-/-

Singleに変換
4/5/0/0, 4/5/0/1, 4/5/0/2, 4/5/0/3, 4/5/0/4, 4/5/0/5, 4/5/0/6, 4/5/0/7, 4/5/0/8, 4/5/0/9, 4/5/0/10, 4/5/0/11, 4/5/0/12, 4/5/0/13, 4/5/0/14, 4/5/0/15, 4/5/1/0, 4/5/1/1, 4/5/1/2, 4/5/1/3, 4/5/1/4, 4/5/1/5, 4/5/1/6, 4/5/1/7, 4/5/1/8, 4/5/1/9, 4/5/1/10, 4/5/1/11, 4/5/1/12, 4/5/1/13, 4/5/1/14, 4/5/1/15, 4/5/2/0, 4/5/2/1, 4/5/2/2, 4/5/2/3, 4/5/2/4, 4/5/2/5, 4/5/2/6, 4/5/2/7, 4/5/2/8, 4/5/2/9, 4/5/2/10, 4/5/2/11, 4/5/2/12, 4/5/2/13, 4/5/2/14, 4/5/2/15, 4/5/3/0, 4/5/3/1, 4/5/3/2, 4/5/3/3, 4/5/3/4, 4/5/3/5, 4/5/3/6, 4/5/3/7, 4/5/3/8, 4/5/3/9, 4/5/3/10, 4/5/3/11, 4/5/3/12, 4/5/3/13, 4/5/3/14, 4/5/3/15, 4/5/4/0, 4/5/4/1, 4/5/4/2, 4/5/4/3, 4/5/4/4, 4/5/4/5, 4/5/4/6, 4/5/4/7, 4/5/4/8, 4/5/4/9, 4/5/4/10, 4/5/4/11, 4/5/4/12, 4/5/4/13, 4/5/4/14, 4/5/4/15, 4/5/5/0, 4/5/5/1, 4/5/5/2, 4/5/5/3, 4/5/5/4, 4/5/5/5, 4/5/5/6, 4/5/5/7, 4/5/5/8, 4/5/5/9, 4/5/5/10, 4/5/5/11, 4/5/5/12, 4/5/5/13, 4/5/5/14, 4/5/5/15, 4/5/6/0, 4/5/6/1, 4/5/6/2, 4/5/6/3, 4/5/6/4, 4/5/6/5, 4/5/6/6, 4/5/6/7, 4/5/6/8, 4/5/6/9, 4/5/6/10, 4/5/6/11, 4/5/6/12, 4/5/6/13, 4/5/6/14, 4/5/6/15, 4/5/7/0, 4/5/7/1, 4/5/7/2, 4/5/7/3, 4/5/7/4, 4/5/7/5, 4/5/7/6, 4/5/7/7, 4/5/7/8, 4/5/7/9, 4/5/7/10, 4/5/7/11, 4/5/7/12, 4/5/7/13, 4/5/7/14, 4/5/7/15, 4/5/8/0, 4/5/8/1, 4/5/8/2, 4/5/8/3, 4/5/8/4, 4/5/8/5, 4/5/8/6, 4/5/8/7, 4/5/8/8, 4/5/8/9, 4/5/8/10, 4/5/8/11, 4/5/8/12, 4/5/8/13, 4/5/8/14, 4/5/8/15, 4/5/9/0, 4/5/9/1, 4/5/9/2, 4/5/9/3, 4/5/9/4, 4/5/9/5, 4/5/9/6, 4/5/9/7, 4/5/9/8, 4/5/9/9, 4/5/9/10, 4/5/9/11, 4/5/9/12, 4/5/9/13, 4/5/9/14, 4/5/9/15, 4/5/10/0, 4/5/10/1, 4/5/10/2, 4/5/10/3, 4/5/10/4, 4/5/10/5, 4/5/10/6, 4/5/10/7, 4/5/10/8, 4/5/10/9, 4/5/10/10, 4/5/10/11, 4/5/10/12, 4/5/10/13, 4/5/10/14, 4/5/10/15, 4/5/11/0, 4/5/11/1, 4/5/11/2, 4/5/11/3, 4/5/11/4, 4/5/11/5, 4/5/11/6, 4/5/11/7, 4/5/11/8, 4/5/11/9, 4/5/11/10, 4/5/11/11, 4/5/11/12, 4/5/11/13, 4/5/11/14, 4/5/11/15, 4/5/12/0, 4/5/12/1, 4/5/12/2, 4/5/12/3, 4/5/12/4, 4/5/12/5, 4/5/12/6, 4/5/12/7, 4/5/12/8, 4/5/12/9, 4/5/12/10, 4/5/12/11, 4/5/12/12, 4/5/12/13, 4/5/12/14, 4/5/12/15, 4/5/13/0, 4/5/13/1, 4/5/13/2, 4/5/13/3, 4/5/13/4, 4/5/13/5, 4/5/13/6, 4/5/13/7, 4/5/13/8, 4/5/13/9, 4/5/13/10, 4/5/13/11, 4/5/13/12, 4/5/13/13, 4/5/13/14, 4/5/13/15, 4/5/14/0, 4/5/14/1, 4/5/14/2, 4/5/14/3, 4/5/14/4, 4/5/14/5, 4/5/14/6, 4/5/14/7, 4/5/14/8, 4/5/14/9, 4/5/14/10, 4/5/14/11, 4/5/14/12, 4/5/14/13, 4/5/14/14, 4/5/14/15, 4/5/15/0, 4/5/15/1, 4/5/15/2, 4/5/15/3, 4/5/15/4, 4/5/15/5, 4/5/15/6, 4/5/15/7, 4/5/15/8, 4/5/15/9, 4/5/15/10, 4/5/15/11, 4/5/15/12, 4/5/15/13, 4/5/15/14, 4/5/15/15
4/5/2/4_3600/-

Singleに変換
4/5/3/2_3600/0、4/5/3/2_3600/1、4/5/3/2_3600/2…（永続）

4.区間表現についての補足
時空間IDの区間表現z/f1:f2/x1:x2/y1:y2_i/t1:t2は通常、各インデックスがstart=<endの関係を保っていますが、Xインデックスにおいてだけstart>endの表現も認め、その場合は地球の逆回転を指すような区間表現とするという要件です。
